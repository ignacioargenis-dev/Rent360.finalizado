# =====================================================
# RENT360 PRODUCTION ENVIRONMENT CONFIGURATION
# =====================================================

# Node Environment
NODE_ENV=production

# =====================================================
# DATABASE CONFIGURATION
# =====================================================

# PostgreSQL Database - CONFIGURAR CON CREDENCIALES REALES
DATABASE_URL="postgresql://rent360_user:R3nt360_Pr0d_2024_S3cur3_P@ssw0rd@localhost:5432/rent360_prod?sslmode=require&schema=public"

# Prisma Configuration
PRISMA_DATABASE_URL="${DATABASE_URL}"

# Database Connection Pool
DB_MAX_CONNECTIONS=20
DB_IDLE_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=60000

# =====================================================
# APPLICATION CONFIGURATION
# =====================================================

# Next.js Configuration
NEXT_PUBLIC_APP_URL=https://rent360.cl
NEXT_PUBLIC_API_URL=https://api.rent360.cl
NEXTAUTH_URL=https://rent360.cl
NEXTAUTH_SECRET=e86060a419c5b833e4b11c5b5df89e880e9d454993ca8d6ba5d82fa6c10de22d

# Application Settings
PORT=3000
HOST=0.0.0.0

# JWT Configuration - CRÍTICO: Claves generadas criptográficamente
JWT_SECRET=eabed7f2c7a74df45db0ce9d352dd409438e8865706431a06feb1b32e406f4d9
JWT_REFRESH_SECRET=1983aac8cb790530374ffdf8a85628903a1c5560deb932212c64de8f0ea6a791
JWT_ACCESS_TOKEN_EXPIRE=15m
JWT_REFRESH_TOKEN_EXPIRE=7d

# =====================================================
# BANKING INTEGRATIONS
# =====================================================

# Banco Estado API - CONFIGURAR DESDE PANEL ADMIN
BANCO_ESTADO_API_KEY=configure_from_admin_panel
BANCO_ESTADO_API_SECRET=configure_from_admin_panel
BANCO_ESTADO_BASE_URL=https://api-empresas.bancoestado.cl/v1
BANCO_ESTADO_WEBHOOK_SECRET=configure_from_admin_panel

# BCI API - CONFIGURAR DESDE PANEL ADMIN
BCI_CLIENT_ID=configure_from_admin_panel
BCI_CLIENT_SECRET=configure_from_admin_panel
BCI_API_KEY=configure_from_admin_panel
BCI_BASE_URL=https://api-empresas.bci.cl/v1
BCI_WEBHOOK_SECRET=configure_from_admin_panel

# Santander API (Placeholder) - CONFIGURAR DESDE PANEL ADMIN
SANTANDER_API_KEY=configure_from_admin_panel
SANTANDER_API_SECRET=configure_from_admin_panel
SANTANDER_BASE_URL=https://api-empresas.santander.cl/v1

# =====================================================
# PAYMENT PROCESSING
# =====================================================

# Stripe (International Payments) - CONFIGURAR DESDE PANEL ADMIN
STRIPE_PUBLIC_KEY=pk_live_configure_from_admin_panel
STRIPE_SECRET_KEY=sk_live_configure_from_admin_panel
STRIPE_WEBHOOK_SECRET=whsec_configure_from_admin_panel

# Khipu (Chilean Payments) - CONFIGURAR DESDE PANEL ADMIN
KHIPU_SECRET=configure_from_admin_panel
KHIPU_RECEIVER_ID=configure_from_admin_panel
KHIPU_WEBHOOK_SECRET=configure_from_admin_panel

# PayPal - CONFIGURAR DESDE PANEL ADMIN
PAYPAL_CLIENT_ID=configure_from_admin_panel
PAYPAL_CLIENT_SECRET=configure_from_admin_panel
PAYPAL_MODE=live

# =====================================================
# FIREBASE CONFIGURATION
# =====================================================

# Firebase Project Configuration - CONFIGURAR DESDE PANEL ADMIN
NEXT_PUBLIC_FIREBASE_API_KEY=configure_from_admin_panel
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=rent360-prod.firebaseapp.com
NEXT_PUBLIC_FIREBASE_PROJECT_ID=rent360-prod
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=rent360-prod.appspot.com
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=configure_from_admin_panel
NEXT_PUBLIC_FIREBASE_APP_ID=configure_from_admin_panel

# Firebase VAPID Key for Push Notifications
NEXT_PUBLIC_FIREBASE_VAPID_KEY=configure_from_admin_panel

# =====================================================
# EMAIL CONFIGURATION
# =====================================================

# SMTP Configuration (Recommended: SendGrid, Mailgun, or AWS SES) - CONFIGURAR DESDE PANEL ADMIN
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USER=apikey
SMTP_PASS=configure_from_admin_panel
SMTP_FROM_EMAIL=noreply@rent360.cl
SMTP_FROM_NAME=Rent360

# Email Templates
EMAIL_TEMPLATES_PATH=./templates/email

# =====================================================
# SMS CONFIGURATION
# =====================================================

# Twilio Configuration (Chilean SMS) - CONFIGURAR DESDE PANEL ADMIN
TWILIO_ACCOUNT_SID=configure_from_admin_panel
TWILIO_AUTH_TOKEN=configure_from_admin_panel
TWILIO_PHONE_NUMBER=+56912345678

# SMS Templates
SMS_TEMPLATES_PATH=./templates/sms

# =====================================================
# CDN CONFIGURATION
# =====================================================

# Cloudflare CDN - CONFIGURAR DESDE PANEL ADMIN
CLOUDFLARE_API_TOKEN=configure_from_admin_panel
CLOUDFLARE_ZONE_ID=configure_from_admin_panel
CLOUDFLARE_ACCOUNT_ID=configure_from_admin_panel

# AWS CloudFront (Alternative) - CONFIGURAR DESDE PANEL ADMIN
AWS_CLOUDFRONT_DISTRIBUTION_ID=configure_from_admin_panel
AWS_CLOUDFRONT_ACCESS_KEY_ID=configure_from_admin_panel
AWS_CLOUDFRONT_SECRET_ACCESS_KEY=configure_from_admin_panel

# =====================================================
# REDIS CONFIGURATION
# =====================================================

# Redis for Caching and Sessions
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=R3nt360_R3d1s_2024_S3cur3_P@ssw0rd
REDIS_DB=0

# Redis Cluster Configuration (for production scaling)
REDIS_CLUSTER_ENABLED=false
REDIS_CLUSTER_NODES=redis://node1:6379,redis://node2:6379,redis://node3:6379

# Session Configuration
SESSION_SECRET=a02ccca4d1a9f384fd2894aa355ed937e61563329f284da36d2e27d9ce76f109
SESSION_MAX_AGE=86400000  # 24 hours in milliseconds
SESSION_UPDATE_AGE=3600000  # 1 hour in milliseconds

# Cache Configuration
CACHE_TTL=3600  # 1 hour in seconds
CACHE_PREFIX=rent360:

# =====================================================
# MONITORING AND LOGGING
# =====================================================

# DataDog Configuration - CONFIGURAR DESDE PANEL ADMIN
DATADOG_API_KEY=configure_from_admin_panel
DATADOG_APP_KEY=configure_from_admin_panel
DATADOG_ENV=production
DATADOG_SERVICE=rent360
DATADOG_VERSION=1.0.0

# New Relic Configuration - CONFIGURAR DESDE PANEL ADMIN
NEW_RELIC_LICENSE_KEY=configure_from_admin_panel
NEW_RELIC_APP_NAME=Rent360 Production
NEW_RELIC_DISTRIBUTED_TRACING_ENABLED=true
NEW_RELIC_ERROR_COLLECTOR_ENABLED=true

# Sentry Configuration - CONFIGURAR DESDE PANEL ADMIN
SENTRY_DSN=configure_from_admin_panel
SENTRY_ENVIRONMENT=production
SENTRY_RELEASE=rent360@v1.0.0
SENTRY_TRACES_SAMPLE_RATE=0.1

# =====================================================
# LOGGING CONFIGURATION
# =====================================================

# Log Level
LOG_LEVEL=info
LOG_FORMAT=json

# Log Files
LOG_FILE_PATH=/var/log/rent360
LOG_MAX_SIZE=10m
LOG_MAX_FILES=5

# Structured Logging
LOG_STRUCTURED=true
LOG_TIMESTAMP_FORMAT=iso

# =====================================================
# FILE STORAGE
# =====================================================

# AWS S3 Configuration - CONFIGURAR DESDE PANEL ADMIN
AWS_ACCESS_KEY_ID=configure_from_admin_panel
AWS_SECRET_ACCESS_KEY=configure_from_admin_panel
AWS_REGION=us-east-1
AWS_S3_BUCKET_NAME=rent360-production-files
AWS_S3_PUBLIC_URL=https://rent360-production-files.s3.amazonaws.com

# Alternative: DigitalOcean Spaces - CONFIGURAR DESDE PANEL ADMIN
DO_SPACES_ACCESS_KEY=configure_from_admin_panel
DO_SPACES_SECRET_KEY=configure_from_admin_panel
DO_SPACES_REGION=sfo3
DO_SPACES_BUCKET_NAME=rent360-files
DO_SPACES_PUBLIC_URL=https://rent360-files.sfo3.digitaloceanspaces.com

# =====================================================
# SECURITY CONFIGURATION
# =====================================================

# CORS Configuration
CORS_ORIGIN=https://rent360.cl,https://www.rent360.cl,https://api.rent360.cl
CORS_CREDENTIALS=true
ALLOWED_ORIGINS=https://rent360.cl,https://www.rent360.cl,https://api.rent360.cl

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false

# Content Security Policy
CSP_ENABLED=true
CSP_REPORT_URI=https://rent360.report-uri.com/r/d/csp/enforce

# Helmet Security Headers
HELMET_ENABLED=true
HELMET_HSTS_MAX_AGE=31536000
HELMET_HSTS_INCLUDE_SUBDOMAINS=true

# =====================================================
# EXTERNAL API KEYS
# =====================================================

# Google Maps API - CONFIGURAR DESDE PANEL ADMIN
GOOGLE_MAPS_API_KEY=configure_from_admin_panel

# Google reCAPTCHA - CONFIGURAR DESDE PANEL ADMIN
RECAPTCHA_SITE_KEY=configure_from_admin_panel
RECAPTCHA_SECRET_KEY=configure_from_admin_panel

# Google Analytics - CONFIGURAR DESDE PANEL ADMIN
GA_TRACKING_ID=configure_from_admin_panel

# =====================================================
# FEATURE FLAGS
# =====================================================

# Feature Toggles
FEATURE_CHAT_ENABLED=true
FEATURE_RATINGS_ENABLED=true
FEATURE_RECURRING_SERVICES_ENABLED=true
FEATURE_PUSH_NOTIFICATIONS_ENABLED=true
FEATURE_BANKING_INTEGRATION_ENABLED=true

# Beta Features
FEATURE_AI_MATCHING_ENABLED=false
FEATURE_ADVANCED_ANALYTICS_ENABLED=true
FEATURE_MOBILE_APP_ENABLED=false

# =====================================================
# PERFORMANCE CONFIGURATION
# =====================================================

# Compression
COMPRESSION_ENABLED=true
COMPRESSION_LEVEL=6

# Gzip Configuration
GZIP_ENABLED=true
GZIP_LEVEL=6

# Brotli Configuration
BROTLI_ENABLED=true
BROTLI_QUALITY=6

# =====================================================
# BACKUP CONFIGURATION
# =====================================================

# Database Backup
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_ENCRYPTION_KEY=340353068f528d7ddd749e07a429ddd47e893948140310d00734f0e32b14c27c

# File Backup
FILE_BACKUP_ENABLED=true
FILE_BACKUP_SCHEDULE=0 3 * * *  # Daily at 3 AM
FILE_BACKUP_RETENTION_DAYS=90

# =====================================================
# HEALTH CHECKS
# =====================================================

# Health Check Endpoints
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_DATABASE=true
HEALTH_CHECK_REDIS=true
HEALTH_CHECK_EXTERNAL_APIS=true

# Readiness and Liveness Probes
READINESS_CHECK_PATH=/api/health/ready
LIVENESS_CHECK_PATH=/api/health/live

# =====================================================
# MAINTENANCE MODE
# =====================================================

MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE="Estamos realizando mantenimiento programado. Volveremos pronto."
MAINTENANCE_ALLOWED_IPS=192.168.1.1,10.0.0.1

# =====================================================
# DEVELOPMENT/DEBUG CONFIGURATION
# =====================================================

# Debug Mode (Should be false in production)
DEBUG=false
VERBOSE_LOGGING=false

# Performance Monitoring
PERFORMANCE_MONITORING_ENABLED=true
MEMORY_MONITORING_ENABLED=true
CPU_MONITORING_ENABLED=true

# =====================================================
# LEGAL AND COMPLIANCE
# =====================================================

# Data Protection
GDPR_COMPLIANT=true
DATA_RETENTION_DAYS=2555  # 7 years for Chilean compliance
DATA_ENCRYPTION_ENABLED=true
SETTINGS_ENCRYPTION_KEY=5934f75de766c8a8a5dde95778eaa905c654bae2b3e5fcb009f3f15dc442c5a6

# Chilean Legal Compliance
LEY_19799_COMPLIANT=true  # Electronic signatures law
DECRETO_SUPREMO_181_COMPLIANT=true  # Digital certification

# =====================================================
# CONTAINER CONFIGURATION
# =====================================================

# Docker Configuration
DOCKER_IMAGE_TAG=latest
DOCKER_CONTAINER_NAME=rent360-prod
DOCKER_NETWORK=rent360-network

# Kubernetes Configuration
K8S_NAMESPACE=rent360-prod
K8S_REPLICAS=3
K8S_CPU_REQUEST=500m
K8S_CPU_LIMIT=1000m
K8S_MEMORY_REQUEST=1Gi
K8S_MEMORY_LIMIT=2Gi

# =====================================================
# LOAD BALANCER CONFIGURATION
# =====================================================

# AWS ALB Configuration
ALB_SSL_CERTIFICATE_ARN=arn:aws:acm:us-east-1:123456789012:certificate/your-certificate-arn
ALB_SECURITY_GROUP_ID=sg-your-security-group-id
ALB_TARGET_GROUP_ARN=arn:aws:elasticloadbalancing:us-east-1:123456789012:targetgroup/your-target-group

# NGINX Load Balancer (Alternative)
NGINX_UPSTREAM_SERVERS=app1:3000,app2:3000,app3:3000
NGINX_SSL_CERT_PATH=/etc/ssl/certs/rent360.crt
NGINX_SSL_KEY_PATH=/etc/ssl/private/rent360.key

# =====================================================
# AUTO-SCALING CONFIGURATION
# =====================================================

# AWS Auto Scaling Group
ASG_MIN_INSTANCES=2
ASG_MAX_INSTANCES=10
ASG_DESIRED_CAPACITY=3
ASG_CPU_TARGET=70
ASG_MEMORY_TARGET=80

# Kubernetes HPA
HPA_MIN_REPLICAS=2
HPA_MAX_REPLICAS=10
HPA_CPU_TARGET=70
HPA_MEMORY_TARGET=80

# =====================================================
# ALERTING CONFIGURATION
# =====================================================

# Alert Thresholds
ALERT_HIGH_CPU_USAGE=90
ALERT_HIGH_MEMORY_USAGE=85
ALERT_HIGH_DISK_USAGE=90
ALERT_HIGH_RESPONSE_TIME=5000  # 5 seconds
ALERT_LOW_SUCCESS_RATE=95  # 95%

# Alert Channels
ALERT_EMAIL_ENABLED=true
ALERT_EMAIL_RECIPIENTS=admin@rent360.cl,dev@rent360.cl
ALERT_SLACK_ENABLED=true
ALERT_SLACK_WEBHOOK_URL=https://hooks.slack.com/services/your-slack-webhook
ALERT_SMS_ENABLED=true
ALERT_SMS_RECIPIENTS=+56912345678,+56987654321

# =====================================================
# CONFIGURACIÓN DE INTEGRACIONES DESDE PANEL ADMIN
# =====================================================
# IMPORTANTE: Las siguientes variables se configuran automáticamente
# desde el panel de administración del sistema:

# APIs de Pago (Stripe, PayPal, WebPay, Khipu)
# - Se configuran desde: /admin/settings/payments
# - Se almacenan encriptadas en la base de datos
# - Se pueden cambiar sin reiniciar la aplicación

# APIs de Firmas Electrónicas (TrustFactory, FirmaPro, DigitalSign)
# - Se configuran desde: /admin/settings/signatures
# - Se almacenan encriptadas en la base de datos
# - Se pueden cambiar sin reiniciar la aplicación

# APIs de Email y SMS (SendGrid, Twilio)
# - Se configuran desde: /admin/settings/notifications
# - Se almacenan encriptadas en la base de datos
# - Se pueden cambiar sin reiniciar la aplicación

# APIs de Mapas y Validación (Google Maps, RUT Validation)
# - Se configuran desde: /admin/settings/integrations
# - Se almacenan encriptadas en la base de datos
# - Se pueden cambiar sin reiniciar la aplicación

# =====================================================
# FINAL NOTES
# =====================================================
# IMPORTANT:
# 1. Las credenciales de integraciones se configuran desde el panel admin
# 2. Solo las variables de sistema críticas están en este archivo
# 3. Use strong, unique passwords and keys for all services
# 4. Store sensitive data in a secure vault (AWS Secrets Manager, HashiCorp Vault, etc.)
# 5. Rotate keys and credentials regularly
# 6. Test all configurations in a staging environment first
# 7. Document all configuration changes
# 8. Set up monitoring and alerting before going live
