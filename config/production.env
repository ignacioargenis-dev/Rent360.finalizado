# Configuración de Producción para Rent360 en DigitalOcean
# Generado para despliegue en App Platform

# ===========================================
# CONFIGURACIÓN BÁSICA
# ===========================================

NODE_ENV=production
NEXT_TELEMETRY_DISABLED=1

# ===========================================
# BASE DE DATOS (PostgreSQL en DigitalOcean)
# ===========================================

# URL completa de la base de datos (se configura automáticamente en App Platform)
# DATABASE_URL=${db.DATABASE_URL}

# Credenciales manuales (solo si no usas la integración automática)
# DATABASE_URL=postgresql://rent360_user:secure_password@db-host:5432/rent360_prod

# ===========================================
# AUTENTICACIÓN Y SEGURIDAD
# ===========================================

# JWT Secrets (CRÍTICOS - Generar secrets únicos)
JWT_SECRET=your-super-secure-jwt-secret-minimum-32-chars-production
JWT_REFRESH_SECRET=your-super-secure-refresh-secret-minimum-32-chars-production

# NextAuth Configuration
NEXTAUTH_URL=https://your-app-name.ondigitalocean.app
NEXTAUTH_SECRET=your-nextauth-secret-production-key

# Encryption Key
ENCRYPTION_KEY=your-32-character-encryption-key-for-production

# ===========================================
# SERVICIOS DE CORREO
# ===========================================

# SendGrid (Producción)
SENDGRID_API_KEY=your-sendgrid-production-api-key
EMAIL_FROM=noreply@rent360.cl

# ===========================================
# ALMACENAMIENTO DE ARCHIVOS
# ===========================================

# DigitalOcean Spaces (Recomendado para DO)
DO_SPACES_ACCESS_KEY_ID=your-do-spaces-access-key
DO_SPACES_SECRET_ACCESS_KEY=your-do-spaces-secret-key
DO_SPACES_REGION=sfo3
DO_SPACES_BUCKET=rent360-production-files
DO_SPACES_ENDPOINT=https://sfo3.digitaloceanspaces.com

# Alternativa: AWS S3
# AWS_ACCESS_KEY_ID=your-aws-access-key
# AWS_SECRET_ACCESS_KEY=your-aws-secret-key
# AWS_S3_BUCKET=rent360-production-files
# AWS_REGION=us-east-1

# ===========================================
# SERVICIOS DE PAGOS
# ===========================================

# Stripe (Producción)
STRIPE_SECRET_KEY=sk_live_your-stripe-live-secret-key
STRIPE_PUBLISHABLE_KEY=pk_live_your-stripe-live-publishable-key
STRIPE_WEBHOOK_SECRET=whsec_your-stripe-live-webhook-secret

# WebPay (Chile)
WEBPAY_COMMERCE_CODE=your-webpay-production-commerce-code
WEBPAY_API_KEY=your-webpay-production-api-key
WEBPAY_ENVIRONMENT=production

# Khipu (Chile)
KHIPU_SECRET=your-khipu-production-secret
KHIPU_RECEIVER_ID=your-khipu-receiver-id

# ===========================================
# SERVICIOS DE FIRMA ELECTRÓNICA
# ===========================================

# TrustFactory (Producción)
TRUSTFACTORY_API_KEY=your-trustfactory-production-api-key
TRUSTFACTORY_API_SECRET=your-trustfactory-production-api-secret
TRUSTFACTORY_CERTIFICATE_ID=TF-2024-PROD-XXX
TRUSTFACTORY_BASE_URL=https://api.trustfactory.cl/v2

# FirmaPro (Producción)
FIRMAPRO_API_KEY=your-firmapro-production-api-key
FIRMAPRO_API_SECRET=your-firmapro-production-api-secret
FIRMAPRO_CERTIFICATE_ID=FP-2024-PROD-XXX
FIRMAPRO_BASE_URL=https://api.firmapro.cl/v3

# ===========================================
# VALIDACIÓN DE IDENTIDAD (Chile)
# ===========================================

# RUT Validation API
RUT_VALIDATION_ENABLED=true
RUT_API_URL=https://api.rutvalidation.cl/v1
RUT_API_KEY=your-rut-validation-production-key

# ===========================================
# REDIS / CACHE (DigitalOcean Managed Redis)
# ===========================================

# Redis URL (se configura automáticamente en App Platform)
# REDIS_URL=${redis.REDIS_URL}

# Configuración manual si es necesario
# REDIS_URL=redis://your-redis-host:25061
# REDIS_PASSWORD=your-redis-password

# ===========================================
# LOGGING Y MONITOREO
# ===========================================

# Winston Logging
LOG_LEVEL=info
LOG_TO_FILE=false
LOG_FILE_PATH=./logs/rent360.log

# Sentry (Error Monitoring)
SENTRY_DSN=your-sentry-production-dsn

# ===========================================
# RATE LIMITING Y SEGURIDAD
# ===========================================

RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_WINDOW_MS=900000

# CORS Configuration
CORS_ORIGIN=https://your-app-name.ondigitalocean.app

# Security Headers
SECURITY_HEADERS_ENABLED=true

# ===========================================
# CONFIGURACIONES DE TERCEROS
# ===========================================

# Google Maps API
GOOGLE_MAPS_API_KEY=your-google-maps-production-key

# Firebase (Notificaciones Push)
NEXT_PUBLIC_FIREBASE_API_KEY=your-firebase-production-api-key
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=your-project.firebaseapp.com
NEXT_PUBLIC_FIREBASE_PROJECT_ID=your-project-id
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=your-project.appspot.com
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=your-sender-id
NEXT_PUBLIC_FIREBASE_APP_ID=your-app-id

# Analytics
ANALYTICS_ID=your-analytics-id

# ===========================================
# CONFIGURACIONES DE APLICACIÓN
# ===========================================

# Feature Flags
ENABLE_REAL_ESTATE_API=true
ENABLE_PAYMENT_PROCESSING=true
ENABLE_EMAIL_NOTIFICATIONS=true
ENABLE_SMS_NOTIFICATIONS=true
ENABLE_PUSH_NOTIFICATIONS=true
ENABLE_ELECTRONIC_SIGNATURES=true

# API Rate Limits
API_RATE_LIMIT_REQUESTS=1000
API_RATE_LIMIT_WINDOW_MS=3600000

# File Upload Limits
MAX_FILE_SIZE_MB=10
ALLOWED_FILE_TYPES=pdf,jpg,jpeg,png,doc,docx

# ===========================================
# CONFIGURACIONES DE MONITOREO
# ===========================================

# Health Check Configuration
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_DATABASE=true
HEALTH_CHECK_REDIS=true

# Metrics
METRICS_ENABLED=true
METRICS_INTERVAL=30000

# ===========================================
# BACKUP CONFIGURATION
# ===========================================

# Backup Settings
BACKUP_ENABLED=true
BACKUP_SCHEDULE=daily
BACKUP_RETENTION_DAYS=30

# ===========================================
# CONFIGURACIONES REGIONALES (Chile)
# ===========================================

# Moneda y localización
DEFAULT_CURRENCY=CLP
DEFAULT_COUNTRY=CL
DEFAULT_LANGUAGE=es

# Zonas horarias
TIMEZONE=America/Santiago

# ===========================================
# CONFIGURACIONES DE MANTENIMIENTO
# ===========================================

# Maintenance Mode
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE="Sistema en mantenimiento. Volveremos pronto."

# Auto-scaling (si se habilita en el futuro)
AUTO_SCALING_ENABLED=false
AUTO_SCALING_MIN_INSTANCES=1
AUTO_SCALING_MAX_INSTANCES=3
AUTO_SCALING_CPU_THRESHOLD=70

# ===========================================
# CONFIGURACIONES DE INTEGRACIÓN
# ===========================================

# Webhook Endpoints
WEBHOOK_SECRET=your-webhook-secret-for-security

# API Versions
API_VERSION=v1

# ===========================================
# CONFIGURACIONES DE PERFORMANCE
# ===========================================

# Cache Settings
CACHE_TTL=3600
CACHE_MAX_SIZE=100

# Database Connection Pool
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_POOL_IDLE_TIMEOUT=30000

# ===========================================
# CONFIGURACIONES DE ALERTAS
# ===========================================

# Alert Thresholds
ALERT_CPU_THRESHOLD=80
ALERT_MEMORY_THRESHOLD=85
ALERT_DISK_THRESHOLD=90
ALERT_ERROR_RATE_THRESHOLD=5

# ===========================================
# CONFIGURACIONES DE DESARROLLO (Deshabilitadas en prod)
# ===========================================

DEBUG=false
DEV_MODE=false
ENABLE_SWAGGER_DOCS=false

# ===========================================
# NOTA IMPORTANTE
# ===========================================
#
# 1. NUNCA uses claves de desarrollo/testing en producción
# 2. Todas las claves API deben ser de producción
# 3. Los secrets JWT deben ser únicos y seguros
# 4. Configura SSL/TLS para todas las conexiones
# 5. Habilita backups automáticos
# 6. Configura monitoring y alertas
# 7. Revisa regularmente los logs de seguridad
#
# Para generar secrets seguros:
# openssl rand -base64 32
#
# ===========================================
# CONFIGURACIÓN DE LOGGING Y ERROR HANDLING
# ===========================================

# Logging mejorado
LOG_LEVEL=WARN
LOG_BUFFER_SIZE=100
ENABLE_ADVANCED_LOGGING=false

# Health checks
HEALTH_CHECK_INTERVAL=30000
ENABLE_METRICS=false

# Error handling
ERROR_FALLBACK_ENABLED=true
SIMPLIFIED_ERROR_BOUNDARY=true

# Para más información, consulta la documentación de despliegue.